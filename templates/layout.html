{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Title{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/dk2fdiuvb/image/upload/v1720972858/media/Logos/ilefxrzrjuuvmt4bdmgu.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Font Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">


    <link rel="stylesheet" type="text/css" href="{% static 'css/layout.css' %}">
</head>
<body class="text-white d-flex flex-column" style="background-color: rgb(31, 41, 55);">
    <header class="py-4" style="background-color: rgb(17, 24, 39)">
        <div class="container d-flex justify-content-between align-items-center">
            <!--<img src="https://res.cloudinary.com/dk2fdiuvb/image/upload/v1720972855/media/Logos/aukinrub9mln8g1fwlc6.png" alt="Exotic Pet Shop Logo" style="width: 10%; height: 10%"/>-->
            <nav>
                <ul class="nav">
                    <li class="nav-item"><a href="{% url 'Store:index' %}" class="nav-link text-white hover-text-orange">Home</a></li>
                    <li class="nav-item"><a href="#" class="nav-link text-white hover-text-orange">Feeders</a></li>
                    <li class="nav-item"><a href="#" class="nav-link text-white hover-text-orange">Supplies</a></li>
                    <li class="nav-item"><a href="#" class="nav-link text-white hover-text-orange">Care Guides</a></li>
                    <li class="nav-item"><a href="{% url 'Store:about' %}" class="nav-link text-white hover-text-orange">About Us</a></li>
                    <li class="nav-item"><a href="{% url 'Store:contact' %}" class="nav-link text-white hover-text-orange">Contact</a></li>
                </ul>
            </nav>
            <div class="d-flex justify-content-center">
                <div class="search-container">
                    <input type="text" id="search-input" class="search-bar" style="border-color: white" placeholder="Search...">
                    <div id="search-suggestions" class="search-suggestions"></div>
                    <a href="#" class="search-icon"><i class="fa fa-search cursor-pointer text-white hover-text-orange mr-3"></i></a>
                </div>
                <a href="{% url 'Store:cart' %}"><i class="fa fa-shopping-cart cursor-pointer text-white hover-text-orange mr-3"></i></a>
                {% if user.is_authenticated %}
                    <a href="{% url 'Store:userProfile' %}"><i class="fa fa-user cursor-pointer text-white hover-text-orange"></i></a>
                {% else %}
                    <a href="{% url 'Store:login' %}"><i class="fa fa-user cursor-pointer text-white hover-text-orange"></i></a>
                {% endif %}
            </div>
        </div>
    </header>
    {% block content %}{% endblock %}
    <footer class="text-white py-4" style="background-color: rgba(17, 24, 39)">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <h3 class="h5 font-weight-bold mb-3">Quick Links</h3>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'Store:index' %}" class="text-white hover-text-orange">Home</a></li>
                        <li><a href="#" class="text-white hover-text-orange">Feeders</a></li>
                        <li><a href="#" class="text-white hover-text-orange">Supplies</a></li>
                        <li><a href="#" class="text-white hover-text-orange">Care Guides</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h3 class="h5 font-weight-bold mb-3">Customer Service</h3>
                    <ul class="list-unstyled">
                        <li><a href="{% url 'Store:contact' %}" class="text-white hover-text-orange">Contact Us</a></li>
                        <li><a href="#" class="text-white hover-text-orange">FAQ</a></li>
                        <li><a href="{% url 'Store:userProfile' %}" class="text-white hover-text-orange">Shipping Information</a></li>
                        <li><a href="#" class="text-white hover-text-orange">Return Policy</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h3 class="h5 font-weight-bold mb-3">About Us</h3>
                    <p>Exotic Pet Shop is dedicated to providing the highest quality exotic pets and supplies, coupled with expert advice and support.</p>
                </div>
                <div class="col-md-3 mb-4">
                    <h3 class="h5 font-weight-bold mb-3">Follow Us</h3>
                    <div class="d-flex">
                        <a href="https://www.facebook.com/profile.php?id=100093383570742" class="text-white hover-text-orange mr-3"><i class="fa fa-facebook"></i></a>
                        <a href="https://x.com/TheTarantulaCo1" class="text-white hover-text-orange mr-3"><i class="fa fa-twitter"></i></a>
                        <a href="https://www.youtube.com/@tarantulacollective" class="text-white hover-text-orange mr-3"><i class="fa fa-youtube-play"></i></a>
                        <a href="https://www.instagram.com/exotic_petshop79/" class="text-white hover-text-orange"><i class="fa fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-4 pt-4 border-top border-light text-center">
                <p>&copy; 2024 Exotic Pet Shop. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchIcon = document.querySelector('.search-icon');
            const searchBar = document.getElementById('search-input');
            const searchSuggestions = document.getElementById('search-suggestions');

            searchIcon.addEventListener('click', (event) => {
                event.preventDefault();
                searchBar.classList.toggle('active');
                if (searchBar.classList.contains('active')) {
                    searchBar.focus();
                } else {
                    searchSuggestions.style.display = 'none';
                }
            });

            // Close search bar when clicking outside
            document.addEventListener('click', (event) => {
                if (!searchBar.contains(event.target) && !searchIcon.contains(event.target)) {
                    searchBar.classList.remove('active');
                    searchSuggestions.style.display = 'none';
                }
            });

            // Global search function
            window.performSearch = function(searchTerm) {
                // This function will be implemented in index.html
                console.log('Searching for:', searchTerm);
            }

            // Handle search input
            searchBar.addEventListener('input', () => {
                const searchTerm = searchBar.value.toLowerCase();
                window.performSearch(searchTerm);

                // Fetch suggestions
                if (searchTerm.length > 0) {
                    fetch(`/search/?query=${searchTerm}`)
                        .then(response => response.json())
                        .then(data => {
                            searchSuggestions.innerHTML = '';
                            data.forEach(animal => {
                                const suggestion = document.createElement('div');
                                suggestion.classList.add('suggestion-item');
                                suggestion.textContent = animal.name;
                                suggestion.addEventListener('click', () => {
                                    window.location.href = `/animal/${animal.id}`;
                                });
                                searchSuggestions.appendChild(suggestion);
                            });
                            searchSuggestions.style.display = 'block';
                        });
                } else {
                    searchSuggestions.style.display = 'none';
                }
            });

            // Handle search submission
            searchBar.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    window.performSearch(searchBar.value);
                    searchBar.value = ''; // Clear the search bar
                    searchBar.classList.remove('active');
                    searchSuggestions.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>